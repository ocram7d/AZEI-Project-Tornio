\documentclass{article}

\usepackage[italian]{babel} % <-- per tradurre in italiano
\usepackage{graphicx} % Required for inserting images
\usepackage{amssymb}
\usepackage{amsmath}
\usepackage{wasysym} % for the diameter command 
\usepackage{subcaption} % nel preambolo, se non l'hai già
\usepackage{booktabs} 

\title{Progetto di Azionamenti ed Elettronica Industriale }
\author{Natale Marco, Sagliocco Davide \\}
\date{1° anno Magistrale Ingegneria Informatica curriculum Robotica e Automazione a.a. 2024/2025}


\begin{document}

\maketitle

\renewcommand{\contentsname}{Indice}
\tableofcontents 

\pagebreak


\section{Introduzione}

Si vuole progettare un controllore per l'azionamento di un motore elettrico in corrente continua con spazzole, per un meccanismo di slittamento del carrello porta utensile (lungo un asse) per un tornio. La slitta porta utensile è montata su una chiocciola traslante lungo una vite senza fine a ricircolo di sfere. Il pezzo da tornire, che si suppnone sia realizzato in acciaio inossidabile, è messo in rotazione e viene bloccato il suo asse di rotazione tramite un autocentrante dall'esterno. L'asse di rotazione della vite è disassato rispetto all'asse di rotazione del motore e la trasmissione tra i due alberi avviene per mezzo di una coppia di ruote dentate.

La tecnica di controllo permette di agire sulla tensione d'armatura del motore al fine di raggiungere una velocità desiderata e quindi una posizione finale dell'utensile. Si ha come obiettivo ultimo la modellazione in MATLAB e Simulink dell'intero sistema controllato e la verifica delle specifiche iniziali, utilizzando la tecnica dell'asservimento di posizione. 

\vspace{1cm}
\begin{figure}[h!]
    \centering
    \includegraphics[scale=0.3] {img/tornio1.png}
    \caption{Operazione di tornitura lungo l'asse longitudinale.}
    \label{fig: tornio intro}
\end{figure}

\pagebreak


\section{Scelta delle Componenti}
Le viti a ricircolo di sfere sono costituite da un albero filettato, da una chiocciola con sfere integrate e da un meccanismo di ricircolo delle sfere, queste sono i tipi di trasmissione del moto più comunemente utilizzati nelle macchine industriali e di precisione. Si usano per trasformare il moto rotatorio
in moto lineare e viceversa, in quanto offrono grande precisione ed elevata efficienza. 
\begin{figure}[h!]
    \centering
    \includegraphics[width=0.5\linewidth]{img/vite1sfera.png}
    \caption{Modello vite a ricircolo di sfera}
    \label{fig: vite1}
\end{figure}

Questa tipologia di viti permettono un movimento preciso e a basso attrito, con una coppia ridotta, rigidezza elevata e movimento uniforme, e ne esistono di varie tipologie: rullata, pelata e rettificata,  e trovano applicazione in svariati ambiti industriali.

\begin{figure}[h!]
    \centering
    \begin{subfigure}{0.45\textwidth}
        \centering
        \includegraphics[width=\linewidth]{img/vitecad1.png}
        \caption{ Disegno CAD in sezione vite a ricircolo di sfera}
        \label{fig:vite1}
    \end{subfigure}
    \hspace{0.05\textwidth}
    \begin{subfigure}{0.45\textwidth}
        \centering
        \includegraphics[width=\linewidth]{img/chiocciola.png}
        \caption{Disegno CAD chiocciola}
        \label{fig:chiocciola1}
    \end{subfigure}
    \caption{Schema CAD Vite e Chiocciola}
    \label{fig:schemavitechiocciola1}
\end{figure}
È previsto anche l'utilizzo di ruote dentate, con rapporto di $1:1$, per la trasmissione di moto tra i due alberi disassati, le quali sono caratterizzate da un momento d’inerzia \( J_g = 2.1 \times 10^{-3} \ \mathrm{kg \cdot m^2} \).
\begin{figure}[h!]
    \centering
    \includegraphics[width=0.8\linewidth]{img/schemaCADtot.png}
    \caption{Schema semplificato di un sistema a vite a ricircolo di sfere}
    \label{fig: schemacad1}
\end{figure}

\subsection{Specifiche di progetto}
\label{specifiche}
Si vuole spostare un utensile montato sulla chiocciola che scorre lungo la vite, allo scopo di tornire un pezzo cilindico lungo \(300\,\text{mm}\); in particolare si vuole effettuare un'operazione di sgrossatura. 
Pertanto, il movimento complessivo dell'utensile avverrà tra la posizione iniziale \(x_0 = 0\,\text{mm}\) e quella finale \(x_f = 300\,\text{mm}\), escludendo i tratti necessari per portarsi alla velocità atta alla lavorazione e a rallentare fino all’arresto. Le specifiche di progetto nel dettaglio sono:
\begin{itemize}
    \item velocità di regime : \begin{math} v_{f} = 25 \end{math} \begin{math} mm/s\end{math}
    \item tempo di accelerazione : \begin{math} t_{a} = 1.5 \end{math} \begin{math} s\end{math}
    \item massa totale utensile e porta utensile : \begin{math} m = 2.5 \end{math} \begin{math} kg\end{math}
    \item lunghezza di lavorazione : \begin{math} l = 300\end{math} \begin{math} 
    mm\end{math}
    \item forza di avanzamento per sgrossatura (stimata) : $F_{w}=670\,\mathrm{N}$
    
    
\end{itemize}
\vspace{0.5cm}
\subsection{Vite a ricircolo di sfera e chiocciola}
Per il progetto sono state scelte da catalogo una vite senza fine a ricircolo di sfera di tipo rullata ed una chiocciola associata della \textit{HIWIN}. 
Sono stati estrapolati dal catalogo fornito dall'azienda i parametri in Tabella \ref{tab:1} in merito alla chiocciola:

\begin{table}[h!]
\centering
\begin{tabular}{| c|c|c|c|c|c|c|c|} 
 \hline
 Modello & $d_n$ \diameter [\textit{mm}]& $P$  [\textit{mm}] & $m_r$ [\textit{kg}] & $\mu$\ & $C_{dyn}$ [\textit{N}] & $\eta_1$ & $\eta_2$ \\
 \hline
 R20-5K4-FSCEW & 20& 5  & 2 & 0.005 &1560 & 0.9 & 0.85\\  
 \hline
\end{tabular}
\caption{\label{tab:1}Valori estratti dal catalogo della vite.}

\end{table}
\vspace{0.2cm}
Dove: 
\begin{itemize}
    \item $d_n$ è il diametro nominale della chiocciola
    \item $P$ è il passo della vite
    \item $\mu$ è una stima del coefficiente di attrito vite-chiocciola
    \item $C_{dyn}$ rappresenta il coefficiente di carico dinamico
    \item $m_r$ è la massa della vite 
    \item $\eta_1$ è l'efficienza meccanica diretta
    \item $\eta_2$ è l'eficienza meccanica inversa
\end{itemize}

\vspace{0.5cm}
\textbf{Calcolo delle Forze e Inerzie}
\vspace{0.2cm}

Si considera la forza di avanzamento $F_w$ come carico applicato lungo l'asse della vite, che deve essere superato per muovere la slitta in modo controllato.
Ai fini della progettazione del sistema di azionamento, è necessario determinare le forze e le coppie in gioco durante il moto uniforme e in fase di accelerazione, tali valori saranno poi utili per la scelta del motore.

\begin{itemize}
    \item \textit{Velocità lineare della chiocciola}, indichiamo con $n_2$ la velocità finale del motore pari a $300 rpm$ : 
    \[
    v_{\text{lineare}} = \frac{P \cdot n_2}{60}=25 \quad [\text{mm/s}]
    \]
    \item \textit{Forza di precarico}, è una forza applicata tra vite e chiocciola per eliminare i giochi meccanici e aumentare la rigidezza del sistema, migliorando precisione e stabilità durante il movimento, pari ad una percentuale $f_{pr}$ (in questo caso il $5\%$) del carico dinamico

    \[
    F_{\text{pr}} = \left( \frac{f_{\text{pr}}}{100} \right) \cdot C_{dyn}=0.7800 \quad [\text{N}]
    \]

    \item \textit{Coefficiente equivalente per precarico}:
    \[
    K_p = \left( \frac{1}{\eta_1} \right) - \eta_2=0.2611
    \]

    \item \textit{Coppia di precarico}:
    \[
    T_d = \frac{K_p \cdot F_{\text{pr}} \cdot P}{2000 \cdot \pi}=1.6207 \cdot10^{-4} \quad [\text{Nm}]
    \]

\end{itemize}

Gran parte delle formulazioni utilizzate nell'analisi del sistema meccanico sono state fornite dal catalogo tecnico HIWIN, con riferimento ai modelli di viti a ricircolo di sfere rullate, al fine di garantire coerenza con i dati reali dei componenti selezionati. 
\vspace{0.5cm}
\subsection{Scelta del Motore}
Si ricavano poi i parametri confrontabili con le specifiche per la scelta del motore, in :

\begin{itemize}
      
    \item \textit{Coppia motore in moto uniforme}:
    \[
    T_a = \frac{F_w \cdot P}{2000 \cdot \pi \cdot \eta_1}=0.5954 \quad [\text{Nm}]
    \]
    \item \textit{Coppia totale in moto uniforme, riportata al motore}:
    \[
    T_M = (T_a + T_b + T_d) \cdot \left( \frac{N_1}{N_2} \right)=0.6155\quad [\text{Nm}]
    \]
    \hspace{0.2cm} dove $T_b = 0.02$ $[\text{Nm}]$ rappresenta l'attrito generato nei supporti rotanti del sistema, in particolare nei cuscinetti che alloggiano l'albero della vite a ricircolo di sfere. Questo valore viene considerato costante e viene sommato alle altre coppie resistenti per determinare la coppia totale richiesta al motore durante il moto uniforme


    \item \textit{Accelerazione richiesta al motore}:
    \[
    \alpha = \frac{2 \pi (n_2 - n_1)}{60 \cdot t_a}=20.9440 \quad [\text{rad/s}^2]
    \]
% 
    \item \textit{Inerzia totale del sistema riportata al motore}, che tiene conto di tutte le componenti in rotazione e traslazione convertite all’albero motore. 
    \[
    J = J_{G1} + J_{G2} \left( \frac{N_1}{N_2} \right)^2 +
    \frac{1}{2} m_r \left( \frac{d_n}{2000} \right)^2 \left( \frac{N_1}{N_2} \right)^2 +
    m_l \left( \frac{P}{2000 \pi} \right)^2 \left( \frac{N_1}{N_2} \right)^2=0.0043\quad [{kg\cdot m^{2}}]
    \]
    dove:
    \begin{itemize}
    \item $J_{G1}$ e $J_{G2}$: momenti d'inerzia delle ruote dentate dell'ingranaggio, rispettivamente sul lato motore e sul lato carico;
    \item $\left(\frac{N_1}{N_2}\right)^2$: fattore di riduzione quadratico che consente di riportare le inerzie dalla parte meccanica (carico) alla parte motore, secondo il rapporto di trasmissione;
    \item $m_r$: massa della vite a ricircolo di sfere, modellata come un cilindro in rotazione;
    \item $d_n$: diametro nominale della vite;
    \item $m_l$: massa traslante complessiva (utensile e supporto), riportata in termini rotazionali tramite il passo della vite $P$
    \end{itemize}
    \item \textit{Coppia richiesta per accelerazione}:
    \[
    T_{a,\text{acc}} = J \cdot \alpha = 0.0901\quad [\text{Nm}]
    \]

    \item \textit{Coppia totale richiesta al motore}:
    \[
    T_{M,a} = T_M + T_{a,\text{acc}}=0.7056 \quad [\text{Nm}]
    \]
\end{itemize}

\vspace{0.3cm}
Dai calcoli effettuati risulta necessario impiegare un motore in grado di fornire una coppia nominale pari a $T_{M,a}= 0,70 $ $Nm$ e una velocità angolare nominale pari a $n_2= 300 rpm$, al fine di soddisfare le specifiche di progetto e garantire il corretto funzionamento dell’azionamento.

Quindi si è scelto di utilizzare un motoriduttore a corrente continua \textit{ROK 311M} con rapporto di riduzione pari a 10. Il motoriduttore, composto da motore e riduttore integrato, permette di ottenere un'unica unità compatta con una coppia desiderata ampiamente sufficiente per l'azionamento, riducendo la velocità,  ma raggiungendo comunque quella nominale richiesta dalle specifiche di progetto. 

\begin{figure}[h!]
    \centering
    \begin{subfigure}{0.48\textwidth}
        \centering
        \includegraphics[width=\linewidth]{img/rok.png}
        \label{fig:rok1}
    \end{subfigure}
    \hfill
    \begin{subfigure}{0.38\textwidth}
        \centering
        \includegraphics[width=\linewidth]{img/motorerok.png}
        \label{fig:rok2}
    \end{subfigure}
    \caption{Motoriduttore ROK 311M}
    \label{fig:rok_motore}
\end{figure}
\begin{figure}
    \centering
    \includegraphics[width=12cm]{img/datasheetmotore.png}
    \caption{Datasheet motore ROK 311M}
    \label{fig:datasheetmotore}
\end{figure}
\pagebreak

\subsubsection{Parametri del motore}
Dopo la scelta del motore, sono stati ricavati dal datasheet i seguenti parametri rilevanti del motoriduttore:

\hspace{0.3cm}
\begin{table}[h!]
\centering
\begin{tabular}{@{}lrr@{}}
\toprule
Parametro & Simbolo & Valore \\
\midrule
Potenza nominale & $P_{nom}$ & $70\,\mathrm{W}$ \\
Velocità nominale & $\omega_{nom}$ & $300\,\mathrm{rpm}$ \\
Resistenza armatura & $R_a$ & $0.85\,\Omega$ \\
Induttanza arm. & $L_a$ & $1.34\times10^{-3}\,\mathrm{H}$ \\
Costante velocità & $k_v$ & $7.3\,\mathrm{V/krpm}$ \\
Inerzia rotore & $J_m$ & $4.7\times10^{-5}\,\mathrm{kg\,m^2}$ \\
Coppia nominale & $C_{nom}$ & $1.5\,\mathrm{Nm}$ \\
Tensione nominale & $V_{nom}$ & $24\,\mathrm{V}$ \\
Corrente nominale & $I_{nom}$ & $3.65\,\mathrm{A}$ \\
\bottomrule
\end{tabular}
\caption{Parametri elettrici e meccanici del motore rilevanti}
\end{table}
\label{1}

Il motoriduttore scelto presenta una coppia nominale $C_{nom} = 1.5 $ [Nm] ed una velocità nominale 
\textit{$\omega_{nom} = \omega_{max}$} = $300$ \textit{rpm}, che sono congruenti con le specifiche di progetto. È stata approssimata la costante di coppia $k_t$ del motore pari a $k_v$ per semplicità. 

Successivamente sono stati effettuati i sguenti calcoli, a partire dalle equazioni statiche del motore, per la determinazione  delle grandezze principali viste dal motore a monte del riduttore:

\begin{itemize}
  \item \textit{Coppia richiesta al motore, dove $T_{loss}$ è stata stimata essere la perdita di coppia causata dal riduttore }: \[C_{tot}=\frac{T_{Ma}}{10}+T_{loss}+J_m\,\frac{\omega_{max}}{t_a}=0.1524\,\mathrm{Nm}\] 
  \item \textit{Inerzia totale vista dal motore a monte del riduttore $J_{tot}$:}  $$C_{tot} = J_{tot}\cdot \frac{d\omega}{dt} = \frac{\omega_{max}}{t_a} \implies J_{tot} = \frac{C_m\cdot T_s}{\omega_{max}} = 0.00072~Kg\cdot m^2$$ 
  \item \textit{Corrente di picco con coppia $C_{tot}$}: \[I_{max}=\frac{C_{tot}}{k_t} = \frac{0.1524}{0.00697}=2.1863\,\mathrm{A}\]
  \item \textit{\textit{forza contro-elettromotrice}}: \[E_g=k_v\,\omega_{max}=0.00697\times314.1593=21.9\,\mathrm{V}\]
\end{itemize}

Dopodiché ci si è occupati del bilancio delle potenze in gioco (meccaniche ed elettriche), al fine di stimare il coefficiente di attrito viscoso $B$ del motore: 
 $$P_{el} = P_{J} + P_{mecc} + P_{mecc_loss}$$ 
\begin{itemize}
\item \textit{Potenza elettrica nominale}: \[P_{el}=V_{nom}\,I_{nom}=87.6\,\mathrm{W}\]
  \item \textit{Potenza meccanica}: 
  \[ P_{mecc}=C_{nom}\,\omega_{nom}=0.22\times314.16=69.1\,\mathrm{W}\]
  \item \textit{Perdite elettriche per effetto Joule}: \[P_{J}=R_a\,I_{nom}^2=0.85\times3.65^2=11.3\,\mathrm{W}\]
  \item \textit{Perdite per attrito viscoso}: \[P_{mecc\_loss}=P_{el}-P_{J}-P_{mecc}=7.2\,\mathrm{W}\]
  \item \textit{è possibile poi ricavare il coefficiente di attrito $B$:}  $$P_{mecc\_loss} = \textit{B}\cdot \omega_{nom}^2 \implies B = \frac{P_{mecc\_loss}}{\omega_{nom}^2} = 7.3\times10^{-5}~ \frac{N\cdot m}{rad/s}$$
\end{itemize}

Si osservi che la potenza richiesta risulta essere lievemente inferiore alla potenza effettiva del motore.

\newpage

\section{Modello del motore}
A partire dai parametri ottenuti, sono state determinate le funzioni di trasferimento del motore relative alla parte elettrica e meccanica del sistema:

$$P_{elet}(s) = \frac{1}{L_as + R_a}$$
$$P_{mec}(s) = \frac{1}{J_{tot}s + B}$$ 

Il sistema presenta due poli a parte reale negativa, pertanto risulta essere stabile. E’ possibile individuare le costanti di tempo elettrica e meccanica, associate ai due poli a parte reale negativa ed evincere che il polo meccanico è dominante rispetto a quello elettrico perché più vicino all'asse immaginario.
Il modello complessivo del motore, successivamente implementato in ambiente Simulink, è mostrato in figura \ref{fig:modello_simulink}.
\begin{figure}[h!]
\centering
    \includegraphics[width=12cm]{img/motoreVuoto.png} 
    \caption{Modello motore in corrente continua in Simulink}
    \label{fig:modello_simulink}
\end{figure}

Utilizzando i parametri precedentemente calcolati, si è proceduto alla simulazione del sistema applicando una tensione nominale pari a $V_a = 23.76~\text{V}$. In figura \ref{fig:vvel_simulink}-\ref{fig:coppia} sono illustrati gli andamenti della velocità angolare $\omega$, della coppia motrice $Q_m$ e della corrente di armatura $I_a$.

\begin{figure}[h!]
\includegraphics[width=6cm]{img/VelVuoto.png}\includegraphics[width=6cm]{img/correnteVuoto.png}
\caption{Andamenti di velocità angolare e corrente di armatura}
\label{fig:vvel_simulink}
\end{figure}
\newpage

\begin{figure}[t!]
\centering
\includegraphics[width=6cm]{img/CoppiaVuoto.png}
\caption{Andamento coppia}
\label{fig:coppia}
\end{figure}

Facendo riferimento alle equazioni statiche del motore in condizioni di regime stazionario e assumendo una coppia esterna nulla, è possibile stimare le principali grandezze elettriche e meccaniche del sistema, da cui si riscontra una buona coerenza, confermando la correttezza del modello adottato.


\subsection{Amplificatore di potenza}
L'ingresso al sistema motore è rappresentato dalla tensione di armatura $V_a$, generalmente fornita da un amplificatore di potenza. Quest'ultimo, nella pratica, non presenta un comportamento lineare in quanto realizzato mediante un convertitore DC/DC.

In fase di modellazione, si è assunta un'approssimazione lineare del comportamento dell’amplificatore di potenza, rappresentandolo tramite un guadagno costante. A tal fine, è stato progettato un guadagno $K_{amp}$ sulla base dell'ipotesi che il segnale di controllo in ingresso all’amplificatore possa raggiungere un massimo di $5~\text{V}$, e che il motore possa essere alimentato con una tensione massima pari al 20\% in più rispetto alla sua tensione nominale, $V_{nom} = 24~\text{V}$:

\[
V_{lim} = 1.2\cdot V_{nom} = 28.8~\text{V}
\]

Questa scelta consente di spingere il motore oltre la sua zona di sicurezza per brevi periodi, al fine di ottenere migliori prestazioni dinamiche.

Il modello dell’amplificatore di potenza implementato in Simulink è mostrato in figura \ref{fig:amp}, dove al guadagno lineare è stato affiancato un blocco di saturazione, posto in serie, per limitare l’uscita entro i valori di sicurezza.

\newpage
\begin{figure}[!h]
\centering
\includegraphics[width=8cm]{img/AmpTensione.png}
\caption{Schema Simulink amplificatore}
\label{fig:amp}
\end{figure}

dove :
$$K_{amp} = \frac{V_{lim}}{5} = 5.76$$
\subsection{Limitatore di corrente}
È stato introdotto un sistema di limitazione della corrente di armatura al fine di evitare i picchi di corrente che si verificano all’avvio del motore, i quali risultano notevolmente superiori al valore nominale.

Nei primi istanti di funzionamento, poiché il motore è inizialmente fermo, la forza contro-elettromotrice risulta nulla, ovvero $E_g = 0~\text{V}$. Tuttavia, al circuito di armatura viene applicata la tensione massima $V_a$, causando una corrente iniziale che eccede ampiamente quella prevista in regime. Questo fenomeno, se non controllato, può compromettere l’integrità del motore.

Per evitare tali condizioni critiche, si è reso necessario dotare il sistema di un limitatore di corrente. Il modello di questo componente, realizzato in ambiente Simulink, è mostrato in figura \ref{fig:limi}.

\begin{figure}[!h]
\centering
\includegraphics[width=10cm]{img/limitCorrente.png}
\caption{Schema Simulink limitatore di corrente}
\label{fig:limi}
\end{figure}

Il limitatore di corrente è costituito da un blocco soglia e da un guadagno. Il blocco soglia è progettato per fornire un’uscita nulla quando l’ingresso si mantiene all’interno di un intervallo definito tra due soglie preimpostate. Qualora l’ingresso superi tali limiti, il blocco restituisce in uscita il valore eccedente, mantenendo un guadagno unitario.

Le soglie sono state impostate al valore della corrente nominale di armatura, pari a $I_{nom} = 3.65~\text{A}$. Il guadagno associato è stato determinato in modo tale che, qualora la corrente nel circuito di armatura ecceda del 20\% la soglia impostata, la tensione in uscita dal trasduttore sia sufficiente a disattivare completamente il segnale di attuazione, azzerando quindi l’ingresso all’amplificatore. 

Il valore del guadagno $K_{lim}$ risulta:

\[
K_{lim} = \frac{5}{0{,}2 \cdot I_{amax}}
\]

Nelle figure \ref{fig:andamenti1}, \ref{fig:andamenti2} e \ref{fig:andamenti3} sono riportati gli andamenti delle principali grandezze del motore in presenza del limitatore di corrente e dell’amplificatore di potenza.

\begin{figure}[h!]
\centering
\includegraphics[scale=0.45]{img/velLimitata.png}
\end{figure}
\begin{figure}[h!]
\centering
\includegraphics[scale=0.25]{img/correnteLimitata.png}
\caption{Andamento di velocità angolare e corrente di armatura con limitatore e amplificatore}
\label{fig:andamenti1}
\end{figure}\

\begin{figure}[h!]
\centering
\includegraphics[width=6cm]{img/coppiaLimitata.png}
\caption{Andamento della coppia con limitatore e amplificatore}
\label{fig:andamenti2}
\end{figure}

\begin{figure}[h!]
\centering
\includegraphics[width=6cm]{img/VaLimitata.png}
\caption{Andamento di $Va$ con limitatore e amplificatore}
\label{fig:andamenti3}
\end{figure}
\newpage

\subsection{Dinamo tachimetrica}
L’obiettivo del progetto consiste nel controllare la velocità di rotazione del motore tramite la regolazione della tensione di armatura $V_a$, in modo da garantire il funzionamento del motore alla velocità desiderata, indipendentemente dalla coppia esterna applicata.

Per realizzare tale controllo, è indispensabile misurare la velocità angolare del motore e convertirla in un segnale di tensione. A questo scopo, viene impiegata una dinamo tachimetrica rumorosa come sensore di velocità.

\begin{figure}[h!]
\includegraphics[width=11.5cm]{img/dinamoReale.png}
\caption{Schema Simulink dinamo tachimetrica rumorosa}
\label{fig:dinamo}
\end{figure}

\newpage
Il guadagno di trasduzione $K_{dt}$ del sensore è stato determinato a partire dal valore di tensione di riferimento corrispondente alla velocità nominale $\omega_{max}$ del motore, secondo la seguente relazione:

\[
K_{dt} = \frac{V_{ctr}}{\omega_{max}} = \frac{4.1247}{314.1593} = 0.0131~\text{Vs/rad}
\]

In questo caso di studio, si considera una dinamo tachimetrica dotata di $N = 20$ lamelle sul collettore. In questo modo si ottiene un’armonica sinusoidale ad una frequenza che dipende dalla velocità a cui si trova il motore, moltiplicata per N. L’ampiezza dell’armonica viene scalata, del 10\% della velocità del motore.
Inoltre, la tensione di controllo da applicare all’ingresso dell’amplificatore di potenza, al fine di ottenere la tensione desiderata al terminale del motore, è data da:

\[
V_{ctr} = \frac{V_{a}}{K_{amp}} = 4{,}1247~\text{V}
\]

\begin{figure}[h!]
\includegraphics[width=11.5cm]{img/motoreAmpLim.png}
\caption{Schema Simulink del modello del motore con amplificatore di potenza e limitatore di corrente}
\label{fig:model}
\end{figure}

\newpage

\section{Progetto del controllore}
L’obiettivo di questo lavoro consiste nel controllare la velocità del motore al fine di movimentare un sistema porta utensile montato su una vite senza fine, con lo scopo di tornire un pezzo su un autocentrante esterno, mantenendo una velocità $\omega$ desiderata.

Assumendo come parametri la velocità massima $v_{max}$, l’accelerazione massima $a_{max}$ e la massa del sistema porta utensile $m_l$, definiti nella sezione \ref{specifiche}, tale metodologia viene denominata \textit{Asservimento di Posizione}.


\subsection{Regolatore PI}
\label{specifiche2}
Per il controllo della velocità del motore è stato adottato un regolatore PI, che garantisce la stabilità del sistema e limita l’amplificazione del rumore, consentendo di raggiungere la velocità desiderata con errore a regime nullo grazie alla proprietà di astaticità rispetto all’ingresso a gradino.
\begin{figure}[h!]
    \centering
    \includegraphics[width=0.5\linewidth]{img/PIDtotale.png}
    \caption{Schema completo Simulink PID}
    \label{fig:enter-label}
\end{figure}

La funzione di trasferimento del controllore PI è espressa come:

\[
C(s) = K_p + \frac{K_i}{s}
\]

Per la determinazione dei parametri $K_p$ e $K_i$ sono state definite le seguenti specifiche:

\begin{itemize}
    \item Ripple della corrente di armatura $I_a$ intorno al 5\% del valore nominale, ovvero:
    \[
    ripple = 5\% \cdot I_{amax} \approx 0{,}11~\text{A}
    \]
    \item Sovraelongazione percentuale massima $S_{max}\%$ pari al 20\% della risposta del sistema a seguito di una variazione infinitesimale del riferimento a gradino in ingresso.
\end{itemize}

\subsubsection{Progetto parametro $K_p$}
Per la progettazione del parametro $K_p$, sono state effettuate simulazioni variando $K_p$ con l’azione integrale disabilitata, considerando una coppia esterna di disturbo nulla e un riferimento impostato al 90\% della tensione di alimentazione. 

Il vincolo sul valore di $K_p$ deriva dalla specifica relativa al ripple della corrente. 

In Tabella \ref{tab:3} sono riportati i valori del ripple della corrente di armatura $I_a$ in funzione di diversi valori di $K_p$:


\begin{figure}[h!]
\centering
\includegraphics[width=12.1cm]{img/rippleIAKp.png}
\end{figure}
\begin{figure}[h!]
    \centering
    \includegraphics[width=12.1cm]{img/rippleVelKp.png}
\caption{Andamento della corrente di armatura al variare di $K_p$}
\label{fig:simkp}
\end{figure}

\begin{table}[h!]
\centering
\begin{tabular}{ |c|c| } 
  \hline
  $K_p$ & $Ripple$ [\textit{A}] \\ 
  \hline
  3.5 & $0.0977$  \\ 
  \hline
  3.6 & $0.1005$ \\
  \hline
  3.7 & $0.1033$  \\ 
  \hline
  3.8 & $0.1061$ \\
  \hline
  3.9 & $0.1089$  \\ 
  \hline
  4 & $0.1117$ \\
  \hline
  5 & $0.1398$  \\ 
  \hline
  6 & $0.1679$  \\ 
  \hline
\end{tabular}
\caption{\label{tab:3}Ripple di corrente al variare di $K_p$.}
\end{table}
\newpage
Si è scelto $K_p=3.9$ per soddisfare la prima specifica. In figura è riportato l'andamento della corrente di armatura

\begin{figure}[h!]
\centering
\includegraphics[width=10cm]{img/kp3.9.png}
\caption{Andamento della corrente di armatura con $K_p$ scelto}
\label{fig:kpscelto}
\end{figure}

\subsubsection{Progetto parametro $K_i$}

Il vincolo relativo alla scelta del parametro $K_i$ è associato alla sovraelongazione della velocità angolare del motore.

Per determinare $K_i$, è stato mantenuto costante il valore di $K_p$ e sono stati condotti test al variare del parametro $K_i$ stesso. Il sistema, in condizioni di regime, è stato perturbato mediante un gradino di ampiezza pari all'1 $\%$ dell'80 $\%$ del valore nominale di alimentazione applicato al riferimento. È stato quindi calcolato il valore della sovraelongazione percentuale $S\%$ al variare di $K_i$.

In Tabella \ref{tab:4} sono riportati i valori della sovraelongazione percentuale $S\%$ in funzione dei diversi valori di $K_i$:

\begin{table}[h!]
\centering
\begin{tabular}{ |c|c| } 
  \hline
  $K_i$ & $S~[\%]$ \\ 
  \hline
  56 & $6.15$  \\ 
  \hline
  61 & $7.53$ \\
  \hline
  68 & $8.86$  \\ 
  \hline
  75 & $10.27$ \\
  \hline
  83 & $11.78$  \\ 
  \hline
  91 & $13.34$ \\
  \hline
  100 & $14.84$ \\
  \hline
  110 & $16.39$ \\
  \hline
  134 & $19.87$ \\
  \hline
  142 & $20.90$ \\
  \hline
\end{tabular}
\caption{\label{tab:4}Sovraelongazione percentuale al variare di $K_i$.}
\end{table}

\begin{figure}[h!]
\includegraphics[width=12.1cm]{img/confrontoKI.png}
\caption{Andamento della velocità angolare al variare di $K_i$}
\label{fig:simki}
\end{figure}
\newpage

Si è scelto $K_i=134.7$ per soddisfare la seconda specifica. In figura \ref{fig:ki_scelto} è riportato l'andamento della velocità angolare.

\begin{figure}[h!]
\centering
\includegraphics[width=10cm]{img/KIScelto.png}
\caption{Andamento della velocità angolare con $K_i=134.7$}
\label{fig:ki_scelto}
\end{figure}

Di seguito è riportato il diagramma di Bode della funzione di trasferimento a ciclo chiuso del motore con controllo in retroazione:

\begin{figure}[h!]
\centering
\includegraphics[scale=0.25]{img/bodePI.png}
\caption{Diagramma di Bode del sistema a ciclo chiuso}
\label{fig:bode}
\end{figure}

\newpage

\subsection{Correzione fenomeno Wind-up}
Un problema rilevante associato all’utilizzo del controllore PI è rappresentato dal fenomeno di \textit{Wind-Up}. A causa della presenza del termine integrativo, se l’errore tra riferimento e uscita si mantiene costantemente dello stesso segno, il contributo dell’integratore cresce indefinitamente. Quando successivamente il segno dell’errore si inverte, l’uscita dell’integratore richiede un intervallo di tempo significativo per scaricarsi, ritardando la risposta del sistema e compromettendo le prestazioni dinamiche del controllo.

\begin{figure}[h!]
\centering
\includegraphics[width=9cm]{img/PIAntiWindUp.png}
\caption{Controllore PI con correzione anti Wind Up}
\label{fig:wu}
\end{figure}
Il fenomeno è stato corretto introducendo una saturazione sull’uscita dell’integratore, limitandola al valore massimo ammissibile del segnale di attuazione, pari a $\pm 5~\text{V}$.

\begin{figure}[h!]
\centering
\includegraphics[width=9cm]{img/confrontoWindUp.png}
\caption{Confronto di corrente di armatura e velocità angolare con fenomeno Wind-up corretto}
\label{fig:wuc}
\end{figure}

\subsection{Feed Forward}
Un’ulteriore limitazione del regolatore PI è l’incapacità di inseguire un riferimento a rampa senza incorrere in un errore a regime finito. Per rendere il controllo di velocità astatico anche rispetto a ingressi di tipo rampa, è stata introdotta una componente di \textit{Feed Forward}.

Questa componente preleva direttamente il riferimento di velocità desiderato e lo invia, tramite un guadagno statico $K_{ff}$, all’uscita del controllo. Il guadagno $K_{ff}$ è stato calcolato come segue:

\[
K_{ff} = \frac{K_{v}}{K_{amp} \cdot K_{dt}} = \frac{0.0697}{5.76 \cdot 0.0131} = 0.9218
\]

\begin{figure}[h!]
\centering
\includegraphics[width=10cm]{img/PI+FF.png}
\caption{Schema controllore PI(s) + Feed Forward}
\label{fig:pi}
\end{figure}

Successivamente, sono state ricalcolate le soglie di saturazione dell’integratore al fine di correggere efficacemente il fenomeno di \textit{Wind-Up}, tenendo conto del margine di sovracorrente:

\[
S_{wu} = \pm  \frac{1.2 \cdot R_a \cdot I_{amax}}{K_{amp}} = \pm 0.3872
\]
\begin{figure}[h!]
    \centering
    \includegraphics[width=1\linewidth]{img/antiwindup+ff+niente.png}
    \caption{Corrente e Velocità con Feedforward e anti Wind-up a confronto con solo anti Wind-up e in presenza di Wind-up}
    \label{fig:enter-label}
\end{figure}

Come si può osservare dalla Figura \ref{fig:rampa}, il sistema è in grado di seguire con precisione il riferimento a rampa.

\begin{figure}[h!]
\centering
\includegraphics[width=12cm]{img/velrefRAMPA.png}
\caption{Confronto tra velocità angolare del motore e riferimento di velocità a rampa con Feed Forward e correzione soglie anti Wind-up}
\label{fig:rampa}
\end{figure}
\newpage
% METTI SECTION IN NUOVA PAGINA E AGIUSTA FIGURE
\section{Asservimento in Posizione e Risultati}
A seguito della progettazione del controllore PI, integrato con l’azione di \textit{Feed Forward}, il modello completo del sistema a ciclo chiuso è riportato in Figura \ref{fig:modelloFin}.

\vspace{0.2cm}
\begin{figure}[h!]
\centering
\includegraphics[width=12cm]{img/schemaFinale.png}
\caption{Schema di controllo Simulink}
\label{fig:modelloFin}
\end{figure}
\vspace{05cm}
Successivamente, sono stati realizzati i riferimenti di accelerazione, velocità e posizione. Tali profili sono stati progettati in modo da permettere al sistema di raggiungere la velocità $v_{max}$ in un tempo di accelerazione $t_a = 1{,}5~\text{s}$, mantenerla costante per un intervallo $t_{hold} = 12~\text{s}$ al fine di eseguire la lavorazione a velocità desiderata, e infine decelerare fino a velocità nulla in un tempo $t_f = t_a$.

\begin{figure}[h!]
\centering
\includegraphics[width=11cm]{img/profili.png}
\caption{Schema  Simulink per riferimenti di accelerazione, velocità e posizione}
\label{fig:rif}
\end{figure}
\newpage
In seguito vengono riportati i risultati della simulazione:

\begin{figure}[h!]
\centering
\includegraphics[width=10cm]{img/tutti.png}
\caption{Simulazione del sistema con ingresso i riferimenti costruiti.}
\label{fig:5}
\end{figure}

\begin{figure}[h!]
\centering
\includegraphics[width=10cm]{img/correnteRifFinale.png}
\caption{Andamento della corrente di armatura $I_a$}
\label{fig:6}
\end{figure}
\newpage
Come si può osservare dalla Figura \ref{fig:5}, i riferimenti di velocità e posizione vengono seguiti con elevata precisione. Inoltre, dalla Figura \ref{fig:6} si evince che la corrente di armatura $I_a$ rispetta la specifica relativa al ripple, così come definita nella Sezione \ref{specifiche2}.

\begin{figure}[h!]
\centering
\includegraphics[width=10cm]{img/VelRefnoDIST.png}
\caption{Andamento velocità angolare in dettaglio}
\label{fig:6}
\end{figure}
È stata condotta una simulazione ipotizzando la presenza di un disturbo applicato al sistema a partire dall’istante $t = 5~\text{s}$, dovuto a un’imperfezione dell’oggetto da tornire. Tale disturbo è stato modellato come una coppia resistente esterna di valore $C_{ext} = 0.033~\text{Nm}$.

\begin{figure}[h!]
\centering
\includegraphics[width=10cm]{img/vel+posREF.png}
\caption{Andamento velocità angolare con un disturbo al tempo $t=5~s$}
\label{fig:9}
\end{figure}



\end{document}
